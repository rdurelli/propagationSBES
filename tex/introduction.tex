%!TEX root = /Users/rafaeldurelli/Dropbox/Artigos Elaborados/KDM propagation_2015/sbes_2015_kdm_propagation/sbes2015_kdm_propagation.tex

%In 2003 the Object Management Group (OMG) created a task force called Architecture Driven Modernization Task Force (ADMTF). It aims to analyze and evolve typical reengineering processes, formalizing them and making them to be supported by models [2]. ADM advocates the conduction of reengineering processes following the principles of Model-Driven Architecture (MDA) [22][2], i.e., all software artifacts considered along with the process are models.                                       	

%According to OMG the most important artifact provided by ADM is the Knowledge Discovery Metamodel (KDM). By means of it, it is possible to represent different system abstraction levels by using its models, such as source code (Source and Code models), Actions (Action model), Architecture (Structure Model) and Business Rules (Conceptual Model). The idea behind KDM is that the community starts to create parsers and tools that work exclusively over KDM instances; thus, every tool that takes KDM as input can be considered platform and language-independent, propitiating interchange among tools. For instance, a refactoring catalogue for KDM can be used for refactoring systems implemented in different languages. 

%Central to modernization processes are the refactorings. Refactorings are .....  However, most of existing model-based refactorings do not cope with propagation of the refactoring changes across other dependent abstraction levels, keeping all models synchronized [ , , , , ]

%	In this paper we present Propagation-Aware Refactorings (PARef), an approach for updating dependent models when specific elements are refactored.

In 2003 the Object Management Group (OMG) created a task force called Architecture Driven Modernization Task Force (ADMTF). The goal was to analyze and evolve typical reengineering processes, formalizing them and making them to be supported by models~\cite{1686216}. The result of this effort was the creation of Architecture-Driven Modernization (ADM), which advocates the conduction of reengineering processes following the principles of Model Driven Architecture (MDA)~\cite{Heckel2008, Andrade:2005, Reus:2006}, i.e., all software artifacts considered along with the process are models. Therefore, a typical ADM-based modernization process starts with a reverse engineering phase to recuperate a model representation of the system; proceeds by applying refactorings over the recuperated model and finalize by a forward engineering phase where the modernized system is generated.

Knowledge Discovery Metamodel (KDM) is the most important metamodel provided by ADM. Its main characteristics are: i) it is an ISO-IEC standard since 2009 (ISO/IEC 19506); ii) it is platform/language independent, and ii) it is able to represent different views of the same system and retain the dependencies among them by using specific metaclasses. This third point is possible thanks to several internal KDM metamodels/packages that are focused on specific views or abstraction levels, such as  source-code (Code metamodel), behaviors (Action metamodel), architecture (Structure metamodel), business rules (Conceptual metamodel), database (Data metamodel), events (Event metamodel), Graphical User Interface (GUI) (UI metamodel) and deployment (platform metamodel).  

It is well known that refactoring activities are central to modernization processes. Refactorings are defined as the process of modifying the internal structure of software without changing its external observable behavior~\cite{refactImpro}. Behavior preservation in refactoring activities has received a lot of attention for years, both in source code and in models~\cite{4440135, Mens:2006:TMT:1706639.1706924, Mens:2006_NEW, Mens:2007}. One of the known problems when refactoring models is change propagation, i.e., the modifications that need to be done in model elements that are dependent on the refactored model element. Although the behavior preservation is harder to check and characterize when dealing with models, there are works that present proposals of keeping the behavior models updated when static models are refactored~\cite{ICSOFT2014_Winetzhammer}. Most of the works propose solutions to propagate changes across different metamodels not in the same metamodel. 

%However, although some research has been conducted on the theme of change propagation in models~\cite{4440135, Mens:2006:TMT:1706639.1706924, Mens:2006_NEW, Mens:2007, ICSOFT2014_Winetzhammer}, none of them have devoted attention on a metamodel like KDM, which groups several metamodels under a unique place and already provide metaclasses for retaining the dependences among these models. In most cases, the related works concentrate on propagating changes in a metamodel different from where had occurred the modification. Besides, the concentration of some of them are in behavior preservation, an aspect that is out of the scope of this work.

However, although some research has been conducted on the theme of change propagation in models~\cite{4440135, Mens:2006:TMT:1706639.1706924, Mens:2006_NEW, Mens:2007, ICSOFT2014_Winetzhammer}, none of them has devoted attention on a metamodel like KDM, which groups several metamodels under a unique place and already provide metaclasses for retaining the dependences among these models. In most cases, the related works concentrate on propagating changes in a different metamodel from where had occured the modification. Besides, the concentration of some of them are in behavior preservation, an aspect that is out of the scope of this work. Furthermore, up to this moment, few research has been done on KDM refactorings~\cite{IRIDurelliCatalogo}, limiting the dissemination and adoption of ADM. We believe that our change propagation approach will foster the creation and research on KDM refactorings. 

%In this paper we present an approach for propagating changes when refactoring KDM model instances. The main goal is to guarantee the global system representation keep synchronized along with the refactoring activities; which are much common during modernization processes. Our approach runs in three steps: i) a search algorithm identifies all the KDM metaclasses dependent on the refactored elements and ii) an ATL Transformation Language (ATL) that performs the model transformation/refactoring, and iii) another ATL created to propagate all the changes throughout all KDM's view. This last step was implemented in a generic way - as a decoupled module, which can be coupled to existing refactorings. In this way, existing users can write KDM refactorings in ATL without worrying about the change propagation. The only task is to provide for our component the input it needs to conduct the propagation.

In this paper we present an approach for propagating changes when refactoring KDM model instances. The main goal is to guarantee the global system representation keep synchronized along with the refactoring activities; which are much common during modernization processes. Our approach runs in three steps: i) a mining algorithm identifies all KDM metaclasses that need to be updated when refactoring a specific KDM metaclass, ii) an ATL Transformation Language (ATL) that performs the intended refactoring, and iii) another ATL that performs one or more model transformations that characterize change propagation. We have implemented the approach in a generic way as a decoupled module, which can be coupled to existing refactorings. In this way, existing users can write KDM refactorings in ATL without worrying about the change propagation. The only task is to provide for our component the input it needs to conduct the propagation.

The main contributions are: i) a mining algorithm to identify all KDM metaclasses that need to be updated when a specific refactoring is performed, ii) a set of refactoring devised to KDM domain, iii) a propagation technique approach, and (iv) a support and preliminary infrastructure for allowing the creation of refactorings for kdm.

This paper is structured as follows: In Section~\ref{sec:background} the notion related to ADM and KDM, their details and a system's description that was instantiated in KDM are showed.
%
%
%Section~\ref{sec:background} presents all needed background on ADM and KDM. 
In Section~\ref{sec:motivation_and_running_example} a motivation is presented. Section~\ref{sec:the_approach} shown the proposed approach. In Section~\ref{sec:evaluation}, an empirical evaluation is presented. In Section~\ref{sec:related_work} there are related works and in Section~\ref{sec:conclusion} there are the conclusions.

